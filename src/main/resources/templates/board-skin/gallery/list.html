<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header.html :: header}"></head>

<body>
<link href="/css/gallery.css" rel="stylesheet" type="text/css">

<nav th:replace="~{fragments/board-nav.html :: boardNav(${boards}, ${boardCode})}"></nav>

<div th:src="@{~/images/example.jpg}"></div>
<div class="board-wrap">
    <h1 class="board-info-title" th:text="${boardName}">공지사항</h1>

    <div class="board-data">
        <div class="data-row" th:each="post : ${posts}">
            <a th:href="@{/board/{code}/view/{id}(code=${boardCode}, id=${post.id})}">
                <div class="img-area" th:if="${post.boardFiles.size() != 0}" th:with="file=${post.boardFiles[0]}">
                    <img th:src="@{/{folder}/{code}/{thumbnail}(folder=${file.thumbnailFolderName}, code=${boardCode}, thumbnail=${file.thumbnailFileName})}">
                </div>
                <div class="img-area" th:if="${post.boardFiles.size() == 0}">
                    <img src="/images/no-img.png"/>
                </div>

                <div class="data-area">
                    <div class="row-title" th:text="${post.title}">test123</div>
                    <div class="row-date" th:text="${#temporals.format(post.createdDate, 'yyyy-MM-dd')}">2023-06-28
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="btn-wrap">
        <button class="white-btn" onclick="moveToWritePage(this.getAttribute('data-code'))" th:data-code="${boardCode}"
                type="button">글쓰기
        </button>
    </div>

    <div class="page-wrap">
        <a href="./list?page=0"><span><<</span></a>
        <a th:href="@{/board/{code}/list(code=${boardCode} ,page=${prevPage})}"><span><</span></a>
        <a th:each="i : ${#numbers.sequence(startPage, endPage)}"
           th:href="@{/board/{code}/list(code=${boardCode}, page=${i - 1})}">
            <span th:class="${i == page + 1} ? 'active' : ''" th:text="${i}">1</span>
        </a>
        <a th:href="@{/board/{code}/list(code=${boardCode}, page=${nextPage})}"><span>></span></a>
        <a th:href="@{/board/{code}/list(code=${boardCode}, page=${finalPage})}"><span>>></span></a>
    </div>
</div>

<script>
    function moveToWritePage(code) {
        location.href = `/board/${code}/write`
    }
</script>
</body>
</html>