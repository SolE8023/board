<!doctype html>
<html lang="en">
<head th:replace="~{fragments/header.html :: header}"></head>

<body>
<link href="/css/notice.css" rel="stylesheet" type="text/css">

<nav th:replace="~{fragments/board-nav.html :: boardNav(${boards}, ${code})}"></nav>

<div class="board-wrap">
    <h1 class="board-info-title">공지사항</h1>

    <div class="board-info-wrap">
        <div class="board-title" th:text="${post.title}">4호선(당고개-사당) 급행을 도입하면 안되는 이유 (자료 첨부)</div>
        <div class="board-info"
             th:text="${post.writer + ' | ' + #temporals.format(post.createdDate, 'yyyy.MM.dd')}">
            용퉤 | 2023.02.22
        </div>
    </div>
    <hr class="hr">

    <div class="board-content" th:utext="${post.content}">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aspernatur, exercitationem sequi. A aliquam animi
        aut
        autem commodi culpa dolorem ducimus ea earum in ipsam iusto labore laborum libero molestiae nam nihil nobis,
        nulla officia officiis omnis perspiciatis placeat quasi quibusdam ratione repudiandae vel! Ab consectetur
        doloremque explicabo labore reprehenderit vero.
    </div>

    <div class="btn-wrap">
        <button class="white-btn" onclick="goToListPage(this.getAttribute('data-code'))" th:data-code="${code}"
                type="button">목록으로
        </button>
        <button class="white-btn" onclick="goToEditPage(this.getAttribute('data-code'), this.getAttribute('data-id'))" th:data-code="${code}" th:data-id="${post.id}"
                type="button">
            수정
        </button>
        <button class="white-btn" onclick="deletePost(this.getAttribute('data-code'), this.getAttribute('data-id'))" th:data-code="${code}" th:data-id="${post.id}"
                type="button">삭제
        </button>
    </div>
</div>

<script>
    function goToListPage(code) {
        location.href = `/post/${code}/list`
    }

    function goToEditPage(code, id) {
        location.href = `/post/${code}/edit/${id}`
    }

    function deletePost(code, id) {
        if (!confirm("삭제하시겠습니까? 삭제한 게시글은 복구가 불가능합니다.")) return

        const url = `/post/${code}/delete/${id}`

        let form = document.createElement('form')
        form.method = 'POST'
        form.action = url

        let hiddenId = document.createElement('input');
        hiddenId.type = 'hidden'
        hiddenId.name = 'id'
        hiddenId.value = `${id}`

        form.appendChild(hiddenId)
        document.body.appendChild(form)
        form.submit()
    }
</script>
</body>
</html>